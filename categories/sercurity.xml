<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Vikas Java Blogs (Posts about sercurity)</title><link>https://vikasontech.github.io/web/</link><description></description><atom:link href="https://vikasontech.github.io/web/categories/sercurity.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2020 &lt;a href="mailto:vikason@gmail.com"&gt;Vikas Verma&lt;/a&gt; </copyright><lastBuildDate>Fri, 20 Mar 2020 12:02:30 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Setup keycloak sercurity for spring boot application</title><link>https://vikasontech.github.io/web/posts/setup-keycloak-sercurity-for-spring-boot-application/</link><dc:creator>Vikas Verma</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;strong&gt;Setup Realm and clients in keycloak&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This blog is the second part of the series of security spring boot application with keycloak. In first part we install setup in keycloak with docker you can see first part here.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Version:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Keycloak: 4.5.0.Final&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Pre-requisites&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Keycloak should be installed in the&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Create realm&lt;/strong&gt;
A realm secures and manages security metadata for a set of users, applications, and registered oauth clients. Users can be created within a specific realm within the Administration console.
Click on Add realm button&lt;/p&gt;
&lt;img alt="https://lh4.googleusercontent.com/D-cerVc3PCbzADRwbvUsMaILQVLYIfqKJ4bZlh_XFa56ifmG1qWvEFditp8M4gtM6Pv6QZUG50uX23fLBfRvzLtdIPkX5mHjmCb9VEL4O_ONCWb6WkFZhPu8OLXAsSuZVJuq9Wu5" src="https://lh4.googleusercontent.com/D-cerVc3PCbzADRwbvUsMaILQVLYIfqKJ4bZlh_XFa56ifmG1qWvEFditp8M4gtM6Pv6QZUG50uX23fLBfRvzLtdIPkX5mHjmCb9VEL4O_ONCWb6WkFZhPu8OLXAsSuZVJuq9Wu5" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;Input the realm name&lt;/p&gt;
&lt;img alt="https://lh6.googleusercontent.com/azCQLitfsOaZfomF02gVfJ1ZCc9Gfao7O7M1ah6Y_kovcvzyYDgh69uKjhOEsP1A3b5ATyDbgyQq3_psoTmt-Cr1eWINDjlCczLjSOF6PSPhUYgiHwMv6sgLLKTJDL57r8DDYTVu" src="https://lh6.googleusercontent.com/azCQLitfsOaZfomF02gVfJ1ZCc9Gfao7O7M1ah6Y_kovcvzyYDgh69uKjhOEsP1A3b5ATyDbgyQq3_psoTmt-Cr1eWINDjlCczLjSOF6PSPhUYgiHwMv6sgLLKTJDL57r8DDYTVu" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;Once realm created you will see this screen&lt;/p&gt;
&lt;img alt="https://lh6.googleusercontent.com/qwKNyTDTv3THw_BowCu0YzeDq9TXhTUnhk0Of4juiGxo5xgZDbz03_-7N18XL8xISb6qbN9iQL5U92dVDUTD-BYHEEtLzoM_Z1azypv1WGaOPy5inFceOelpkbhutH5FVGEcaRO8" src="https://lh6.googleusercontent.com/qwKNyTDTv3THw_BowCu0YzeDq9TXhTUnhk0Of4juiGxo5xgZDbz03_-7N18XL8xISb6qbN9iQL5U92dVDUTD-BYHEEtLzoM_Z1azypv1WGaOPy5inFceOelpkbhutH5FVGEcaRO8" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;&lt;strong&gt;Create Client&lt;/strong&gt;
We need 2 clients one is for bearer-only client for the application, and another one is public client to get the access token&lt;/p&gt;
&lt;img alt="https://lh4.googleusercontent.com/D-cerVc3PCbzADRwbvUsMaILQVLYIfqKJ4bZlh_XFa56ifmG1qWvEFditp8M4gtM6Pv6QZUG50uX23fLBfRvzLtdIPkX5mHjmCb9VEL4O_ONCWb6WkFZhPu8OLXAsSuZVJuq9Wu5" src="https://lh4.googleusercontent.com/D-cerVc3PCbzADRwbvUsMaILQVLYIfqKJ4bZlh_XFa56ifmG1qWvEFditp8M4gtM6Pv6QZUG50uX23fLBfRvzLtdIPkX5mHjmCb9VEL4O_ONCWb6WkFZhPu8OLXAsSuZVJuq9Wu5" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;Create Public client&lt;/p&gt;
&lt;img alt="https://lh6.googleusercontent.com/8a4t3_kpYchQIZDBCaFr7E7WItGyIMAj-kAjJtVrpyVCMmSH0j41M01TeZrBwjXGJHXr-W_RxC28L5HLvTSyO9u7no8_vTUgSIyY05W37jODHirye8f45YHCYXnUNRHMdu52HkRk" src="https://lh6.googleusercontent.com/8a4t3_kpYchQIZDBCaFr7E7WItGyIMAj-kAjJtVrpyVCMmSH0j41M01TeZrBwjXGJHXr-W_RxC28L5HLvTSyO9u7no8_vTUgSIyY05W37jODHirye8f45YHCYXnUNRHMdu52HkRk" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;Once public client is created you will see the below screen&lt;/p&gt;
&lt;p&gt;Create Bearer only client and set the access type to beare-only&lt;/p&gt;
&lt;img alt="https://lh3.googleusercontent.com/UM20ae8FKtq17f_RCzet5nTuG42dUrgyl9gmYhi_a-jtx1XhLIypXszd7z2kbatyNSZodFfP6wdZ5QxjCjuxCAUUPaUdyp26tgxnCnmXprWkA4rUOtvPeukuQvcsaDWmoNkiBHIb" src="https://lh3.googleusercontent.com/UM20ae8FKtq17f_RCzet5nTuG42dUrgyl9gmYhi_a-jtx1XhLIypXszd7z2kbatyNSZodFfP6wdZ5QxjCjuxCAUUPaUdyp26tgxnCnmXprWkA4rUOtvPeukuQvcsaDWmoNkiBHIb" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;Add new Admin role for the application client&lt;/p&gt;
&lt;img alt="https://lh4.googleusercontent.com/D-cerVc3PCbzADRwbvUsMaILQVLYIfqKJ4bZlh_XFa56ifmG1qWvEFditp8M4gtM6Pv6QZUG50uX23fLBfRvzLtdIPkX5mHjmCb9VEL4O_ONCWb6WkFZhPu8OLXAsSuZVJuq9Wu5" src="https://lh4.googleusercontent.com/D-cerVc3PCbzADRwbvUsMaILQVLYIfqKJ4bZlh_XFa56ifmG1qWvEFditp8M4gtM6Pv6QZUG50uX23fLBfRvzLtdIPkX5mHjmCb9VEL4O_ONCWb6WkFZhPu8OLXAsSuZVJuq9Wu5" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;&lt;cite&gt;Create Admin Client&lt;/cite&gt;&lt;/p&gt;
&lt;img alt="https://lh6.googleusercontent.com/QDzHU9q-1dlYf7pAc8A9OtrPzDcAolc-yweSjKPvMic4EvwuHrQMxD3UyGrXzZugH1fPa8Ke4FyvJz0s51MEYCNXsig18RPQBbxq4nprkqmkOV39sLiuFzfrWhUNqo8-a4swXOud" src="https://lh6.googleusercontent.com/QDzHU9q-1dlYf7pAc8A9OtrPzDcAolc-yweSjKPvMic4EvwuHrQMxD3UyGrXzZugH1fPa8Ke4FyvJz0s51MEYCNXsig18RPQBbxq4nprkqmkOV39sLiuFzfrWhUNqo8-a4swXOud" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;&lt;cite&gt;Create User Client&lt;/cite&gt;&lt;/p&gt;
&lt;img alt="https://lh4.googleusercontent.com/5BfFEIYI98ndYFjp5MHrJ0PBpVNQaMVXewfowYRXKUpld6ySYhTdUXtRk_W5gPPXz4NStjji_ud4Z49oIzVhco9gJw838aGLJh4w8M9d-U3Ip80x_tJbceljy2gaPw04kLsNW7Vj" src="https://lh4.googleusercontent.com/5BfFEIYI98ndYFjp5MHrJ0PBpVNQaMVXewfowYRXKUpld6ySYhTdUXtRk_W5gPPXz4NStjji_ud4Z49oIzVhco9gJw838aGLJh4w8M9d-U3Ip80x_tJbceljy2gaPw04kLsNW7Vj" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;&lt;strong&gt;Create User for the application&lt;/strong&gt;
Create two user with role admin with and user.&lt;/p&gt;
&lt;img alt="https://lh3.googleusercontent.com/9r6HttwYY9Y9e1RNYBnbK1iEdBGYlDyni1Df49GB0ILNKvtn2OKdEPAacZxgAjNv612nBLosnMXdoDE1rhvW0f71bcYEUkbMnj0czgzY91fAbEi0ZbQBNbdeukQFBGR69YLP0skg" src="https://lh3.googleusercontent.com/9r6HttwYY9Y9e1RNYBnbK1iEdBGYlDyni1Df49GB0ILNKvtn2OKdEPAacZxgAjNv612nBLosnMXdoDE1rhvW0f71bcYEUkbMnj0czgzY91fAbEi0ZbQBNbdeukQFBGR69YLP0skg" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;&lt;cite&gt;Create admin user&lt;/cite&gt;&lt;/p&gt;
&lt;img alt="https://lh4.googleusercontent.com/48JZs2zmgmH3QuVi6MzQLRzmScnK04n8Gihns5mxzZe4s7IN21Y8PO_3UactVVzz4vkom4N3HFfj39o44RTui_YyRHNIALQaepXogo3R8F3gMoSdLVAuo2f0GZ58ebzuGxFj8IsH" src="https://lh4.googleusercontent.com/48JZs2zmgmH3QuVi6MzQLRzmScnK04n8Gihns5mxzZe4s7IN21Y8PO_3UactVVzz4vkom4N3HFfj39o44RTui_YyRHNIALQaepXogo3R8F3gMoSdLVAuo2f0GZ58ebzuGxFj8IsH" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;&lt;cite&gt;Set password&lt;/cite&gt;&lt;/p&gt;
&lt;img alt="https://lh6.googleusercontent.com/IV5zzA0Et3iqJ120u69i_FKs5N-4goRgNJCkgRin4TeLPNOxldmN2G7CNVC5gOVnkM8ZNSXfDe4WlLfQ6IvpZHuk5XGWtLcgoVEZVik7mTIM6aN1uYiy2rD_-5-nbbDURPLGMB6T" src="https://lh6.googleusercontent.com/IV5zzA0Et3iqJ120u69i_FKs5N-4goRgNJCkgRin4TeLPNOxldmN2G7CNVC5gOVnkM8ZNSXfDe4WlLfQ6IvpZHuk5XGWtLcgoVEZVik7mTIM6aN1uYiy2rD_-5-nbbDURPLGMB6T" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;Assign admin role to user vik-admin&lt;/p&gt;
&lt;img alt="https://lh3.googleusercontent.com/VbHS9yiqkju_iz9Inp18WkywhBIS-x9GQrcTZ-RS3l7dE4OlBpbWmyLwRkDqCgw0MD-D5gy0g9arDpUoWog55hCz46mIzZp9yNdEKTnuU_K4KYkYrh1J2ejcRzJrAX4Mwy_BHIzg" src="https://lh3.googleusercontent.com/VbHS9yiqkju_iz9Inp18WkywhBIS-x9GQrcTZ-RS3l7dE4OlBpbWmyLwRkDqCgw0MD-D5gy0g9arDpUoWog55hCz46mIzZp9yNdEKTnuU_K4KYkYrh1J2ejcRzJrAX4Mwy_BHIzg" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;Similarly create another user account vik-user with user role&lt;/p&gt;
&lt;img alt="https://lh6.googleusercontent.com/te3Nr_no_S9iFvTvkYFHJBA_iWuGA72vXLC08EikmbVBTbYw8byetuFnvifn8yMV1mEHfQntsw-Bu99j6SwcSgBVdN9qr2S7hajWad2jUWKEXzls5aUO95ItXr7COvkg_m8L9FbT" src="https://lh6.googleusercontent.com/te3Nr_no_S9iFvTvkYFHJBA_iWuGA72vXLC08EikmbVBTbYw8byetuFnvifn8yMV1mEHfQntsw-Bu99j6SwcSgBVdN9qr2S7hajWad2jUWKEXzls5aUO95ItXr7COvkg_m8L9FbT" style="width: 600.0px; height: 300.0px;"&gt;
&lt;img alt="https://lh5.googleusercontent.com/DcX4ETQKTKxaUFn_hQeEuA3i5wBjt2JFTJ9-qp-ziUIhnUaUaGHIdSTlliN7h6_t9UpwceTFMHUvjdFn0-hRD8QX8sou8qtuTEnIrfyPZmQI8GgXbJf_cad3tFXDMgPJLfSMiwUg" src="https://lh5.googleusercontent.com/DcX4ETQKTKxaUFn_hQeEuA3i5wBjt2JFTJ9-qp-ziUIhnUaUaGHIdSTlliN7h6_t9UpwceTFMHUvjdFn0-hRD8QX8sou8qtuTEnIrfyPZmQI8GgXbJf_cad3tFXDMgPJLfSMiwUg" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;&lt;strong&gt;Get access and refresh token&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;User below curl to get the access token&lt;/p&gt;
&lt;p&gt;&lt;script src="https://gist.github.com/ee0e26e7df9e89f7bc59377024531348.js"&gt;&lt;/script&gt;
        &lt;/p&gt;&lt;noscript&gt;&lt;pre&gt;curl -s --data "grant_type=password&amp;amp;client_id=token-backend-client&amp;amp;username=vik-admin&amp;amp;password=admin" \
    http://localhost:9001/auth/realms/backend-service/protocol/openid-connect/token | jsonpp&lt;/pre&gt;&lt;/noscript&gt;
&lt;p&gt;&lt;strong&gt;Response&lt;/strong&gt;&lt;/p&gt;
&lt;img alt="https://lh5.googleusercontent.com/-B8_F-3ei2OGuI_yTQT8ETG4_vmlFZPO5jJPqt_YvIqWIEOEFVj288LtpM6ccBfZanVSVM7j9CCN2xOtBxPIbQq3rH_u4k6DTUpoKS4E4_red7dt3eEg3d3MXMAeCIeGcMEFHA2c" src="https://lh5.googleusercontent.com/-B8_F-3ei2OGuI_yTQT8ETG4_vmlFZPO5jJPqt_YvIqWIEOEFVj288LtpM6ccBfZanVSVM7j9CCN2xOtBxPIbQq3rH_u4k6DTUpoKS4E4_red7dt3eEg3d3MXMAeCIeGcMEFHA2c" style="width: 600.0px; height: 300.0px;"&gt;
&lt;p&gt;In the next blog we will se how to secure spring boot application. You can see the blog &lt;a class="reference external" href="https://vikasontech.github.io/web/posts/secure-spring-boot-application-with-keycloak/"&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</description><category>keycloak</category><category>sercurity</category><category>spring-boot</category><guid>https://vikasontech.github.io/web/posts/setup-keycloak-sercurity-for-spring-boot-application/</guid><pubDate>Fri, 30 Nov 2018 13:42:01 GMT</pubDate></item></channel></rss>